<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Using the root folder of the server as starting point for al the links in the website -->
        <!-- <base href="./"> -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- All the different items for having a nice favicon on each platform. Even works on the touchbar of MacBooks, and the Windows 8 tiles. -->
        <link rel="apple-touch-icon" sizes="180x180" href="static/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="static/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="static/favicon/favicon-16x16.png">
        <!-- Macbook Safari opened tab in the touch bar, using the svg and the color specified -->
        <link rel="mask-icon" href="static/favicon/safari-pinned-tab.svg" color="#2db8ef">
        <!-- Windows 8 (and 8.1 probably too) using the white icon and colored background -->
        <meta name="msapplication-TileColor" content="#2db8ef">
        <meta name="theme-color" content="#ffffff">
        <title>SeaMonkeys - Home</title>
        <link rel="stylesheet" type="text/css" href="static/styling.css">
        <link rel="stylesheet" type="text/css" href="static/dither.css">
    </head>

    <body>
        <!-- Dither Background Effect -->
        <div id="dither-background"></div>

        <header>
            <nav>
                <div class="logo">
                    <a href="index.html"><img src="static/images/SeaMonkey New Logo JigSaw.png" alt="SeaMonkeys logo"></a>
                    <a href="index.html" class="navtext logotext"></a>
                    <a href="index.html" class="navtext logotextresponsive"></a>
                </div>
                <ul class="menu">
                    <li>
                        <a href="index.html" class="navtext active">Home</a>
                    </li>
                    <li>
                        <a href="research.html" class="navtext">Research</a>
                    </li>
                    <li>
                        <a href="scans.html" class="navtext">Scans</a>
                    </li>
                    <li>
                        <a href="about.html" class="navtext">About</a>
                    </li>
                </ul>
            </nav>
        </header>

        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <div class="hero-text">
                    <h1>FROM PICTURES<br>TO <span class="highlight">3D</span> ASSETS</h1>
                    <p class="hero-description">A comprehensive guide on how to scan real life scenes and transform them into digital assets.</p>
                    <div class="hero-buttons">
                        <a href="#" class="btn btn-primary">Learn More <span class="arrow">â€º</span></a>
                        <a href="scans.html" class="btn btn-secondary">Check Scans</a>
                    </div>
                </div>
                <div class="hero-model" id="model-container">
                    <!-- 3D Model will be rendered here -->
                </div>
            </div>
        </section>

        <div class="end"></div>

        <a href="#top">
        <img class="scrolltop" src="static/images/scrollup.png" alt="Scroll up button">
        </a>

        <!-- Three.js library (global) for dither.js -->
        <script src="https://unpkg.com/three@0.152.0/build/three.min.js"></script>
        
        <!-- Dither Effect Script -->
        <script src="static/dither.js"></script>

        <!-- Import Map for Three.js ES Modules (for GLTFLoader) -->
        <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.152.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.152.0/examples/jsm/"
            }
        }
        </script>

        <!-- 3D Model Cursor Effect Script -->
        <script type="module">
            import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

            const container = document.getElementById('model-container');
            if (!container) throw new Error('Model container not found');

            // Scene setup
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(35, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 6;

            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setClearColor(0x000000, 0);
            renderer.setPixelRatio(window.devicePixelRatio);
            container.appendChild(renderer.domElement);

            // Lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 1.5);
            directionalLight.position.set(5, 5, 5);
            scene.add(directionalLight);

            const fillLight = new THREE.DirectionalLight(0x3a9bdc, 0.5);
            fillLight.position.set(-5, 0, -5);
            scene.add(fillLight);

            const backLight = new THREE.DirectionalLight(0xffffff, 0.3);
            backLight.position.set(0, -5, -5);
            scene.add(backLight);

            // Load model
            let model = null;
            let targetRotationX = 0;
            let targetRotationY = 0;
            let currentRotationX = 0;
            let currentRotationY = 0;

            const loader = new GLTFLoader();
            loader.load('static/model/MonkeyName.glb', function(gltf) {
                model = gltf.scene;
                
                // Center and scale the model - MUCH BIGGER
                const box = new THREE.Box3().setFromObject(model);
                const center = box.getCenter(new THREE.Vector3());
                const size = box.getSize(new THREE.Vector3());
                
                const maxDim = Math.max(size.x, size.y, size.z);
                const scale = 4.5 / maxDim;  // Increased from 2.5 to 4.5
                model.scale.setScalar(scale);
                
                model.position.x = -center.x * scale;
                model.position.y = -center.y * scale;
                model.position.z = -center.z * scale;
                
                scene.add(model);
            }, undefined, function(error) {
                console.error('Error loading model:', error);
            });

            // Mouse tracking
            document.addEventListener('mousemove', function(event) {
                const centerX = window.innerWidth / 2;
                const centerY = window.innerHeight / 2;
                
                targetRotationY = ((event.clientX - centerX) / centerX) * 0.5;
                targetRotationX = ((event.clientY - centerY) / centerY) * 0.3;
            });

            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                
                if (model) {
                    // Smooth interpolation
                    currentRotationX += (targetRotationX - currentRotationX) * 0.05;
                    currentRotationY += (targetRotationY - currentRotationY) * 0.05;
                    
                    model.rotation.x = currentRotationX;
                    model.rotation.y = currentRotationY;
                }
                
                renderer.render(scene, camera);
            }
            animate();

            // Handle resize
            window.addEventListener('resize', function() {
                const width = container.clientWidth;
                const height = container.clientHeight;
                
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
                renderer.setSize(width, height);
            });
        </script>
    
    </body>
</html>
